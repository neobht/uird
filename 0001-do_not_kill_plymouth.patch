From 0f2d1db613277a9b59814aff576d848ea2568c68 Mon Sep 17 00:00:00 2001
From: betcher <a.betkher@rosalinux.ru>
Date: Thu, 17 Nov 2022 10:04:51 +0300
Subject: [PATCH] do_not_kill_plymouth

---
 modules.d/99base/dracut-lib.sh | 1 +
 1 file changed, 1 insertion(+)

diff --git a/modules.d/99base/dracut-lib.sh b/modules.d/99base/dracut-lib.sh
index 6ba836ec..ce25d27e 100755
--- a/modules.d/99base/dracut-lib.sh
+++ b/modules.d/99base/dracut-lib.sh
@@ -113,6 +113,7 @@ killall_proc_mountpoint() {
         esac
         [ -e "/proc/$_pid/exe" ] || continue
         [ -e "/proc/$_pid/root" ] || continue
+        grep plymouth "/proc/$_pid/cmdline" && continue 
         if strstr "$(ls -l -- "/proc/$_pid" "/proc/$_pid/fd" 2> /dev/null)" "$1"; then
             kill -9 "$_pid"
             _killed=1
-- 
2.35.2

